version: '3'

includes:
  devtools:
    taskfile: .devtools/Taskfile.yaml
    dir: .
    optional: true

tasks:
  default:
    desc: "Listar tareas disponibles"
    cmds:
      - task --list

  # CI EspecÃ­fico para Next.js
  ci:
    desc: "Ejecutar CI local (Install + Lint + Build Static)"
    dir: frontend
    cmds:
      - echo "ğŸ“¦ [CI] Instalando dependencias Next.js..."
      - npm ci
      - echo "ğŸ¨ [CI] Linting..."
      - npm run lint
      - echo "ğŸ—ï¸ [CI] Building (Export)..."
      - npm run build

  # Sobrescribimos build para evitar Docker
  build:
    desc: "Build placeholder (Amplify gestiona el build en la nube)"
    cmds:
      - echo "â„¹ï¸ Esta app usa Amplify Hosting. El build real ocurre en 'task ci'."

  start:
    desc: "Iniciar servidor de desarrollo"
    dir: frontend
    cmds: 
      - npm run dev
