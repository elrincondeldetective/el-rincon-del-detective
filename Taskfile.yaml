# /webapps/erd-ecosystem/apps/el-rincon-del-detective/Taskfile.yaml
version: '3'

includes:
  # Importamos devtools para tener acceso a los comandos globales si hacen falta
  devtools:
    taskfile: .devtools/Taskfile.yaml
    dir: .
    optional: true

tasks:
  default:
    desc: "Listar tareas disponibles"
    cmds:
      - task --list

  # âœ… CI EspecÃ­fico para Next.js (Frontend Only)
  ci:
    desc: "Ejecutar CI local (Install + Lint + Build Static)"
    dir: frontend
    cmds:
      - echo "ğŸ“¦ [CI] Instalando dependencias Next.js..."
      - npm ci
      - echo "ğŸ¨ [CI] Linting..."
      - npm run lint
      - echo "ğŸ—ï¸ [CI] Building (Export)..."
      - npm run build

  # No necesitamos 'build' de Docker aquÃ­ porque usamos Amplify Hosting (Source Code)
  # Pero dejamos un placeholder por si usas el generador genÃ©rico
  build:
    desc: "Build placeholder (Amplify gestiona el build en la nube)"
    cmds:
      - echo "â„¹ï¸ Esta app usa Amplify Hosting. Usa 'task ci' para validar el build localmente."

  start:
    desc: "Iniciar servidor de desarrollo"
    dir: frontend
    cmds: 
      - npm run dev